<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
 <!--
      loads the http over https ssl -
      welcome to my website!

	this theme is based off the Ice & Fire theme created by Lucas Gatsas
      https://www.twitter.com/LucasGatsas
      www.lucasgatsas.ch - switzerland.
  -->


<!-- Microsoft Internet Explorer documentMode compatMode setting IE Modus -->
<script type="text/javascript">
var IE = null;
if (window.navigator.appName == "Microsoft Internet Explorer") {
  if (document.documentMode) {

    IE = document.documentMode;
    } else {

        IE = 5;
          if (document.compatMode) {
      if (document.compatMode == "CSS1Compat")
      IE = 11;
      }
    }
  }
</script>

    <meta charset="utf-8">
    <!-- X-UA -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="X-UA-Compatible" content="IE=11" />
    <link rel="author" title="Ranjit Jhala" href="http://ranjitjhala.github.io" />

    <meta name="google" content="notranslate" />
    <!-- Viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- index ROBOTS follow -->
    <meta name="robots" content="index, follow" />
    <!-- Site Desciption -->
    <meta name="description" content="UCSD CSE 130">
    <!-- Site Desciption -->
    <meta name="keywords" content="haskell, refinement types, liquid types, formal methods, type systems">
    <!-- Favicon -->
    <link rel="shortcut icon" href="https://ucsd-cse130.github.io/wi22/static/img/ico.png" type="image/x-icon" />
    <!-- Blog Title -->
    <title>cse130</title>

    <!--     <title>{% if page.title %}{{ page.title }} - {{ site.title }}{% else %}{{ site.title }}{% endif %}</title>
-->
    <!-- Property Metas -->
    <meta property="og:image" content="https://ucsd-cse130.github.io/wi22/static/img/ix.png" />
    <meta property="og:title" content="UCSD CSE 130" />
    <meta property="og:site_name" content="UCSD CSE 130" />
    <!-- Canonical -->
    <link rel="canonical" href="{{ page.url | replace:'index.html','' | prepend: site.baseUrl | prepend: site.url }}">
    <!-- StyleSheet -->
    <link rel="stylesheet" href="https://ucsd-cse230.github.io/sp20/static/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://ucsd-cse230.github.io/sp20/static/css/ronacher.css" type="text/css">
    <link rel="stylesheet" href="https://ucsd-cse230.github.io/sp20/static/css/syntax.css">
    <link rel="stylesheet" href="https://ucsd-cse230.github.io/sp20/static/css/liquid-light.css">

    <!-- Fonts
    <link href='https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Playfair+Display:400,700,900,400italic,700italic,900italic' rel='stylesheet' type='text/css'>
    -->

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style>
	#preloader {position:fixed;top:0;left:0;right:0;bottom:0;background-color:#fff; /* change if the mask should have another color then white */z-index:99; /* makes sure it stays on top */}
	#status {width:200px;height:200px;position:absolute;left:50%; /* centers the loading animation horizontally one the screen */top:50%; /* centers the loading animation vertically one the screen */background-image:url("/static/img/preloader.gif"); /* path to your loading animation */background-repeat:no-repeat;background-position:center;margin:-100px 0 0 -100px; /* is width and height divided by two */}
	ul, ol {margin-top: 0;margin-bottom: 10px;}
	.navbar-inverse {background-color: #FFF;border-color: #FFFFFF;}
</style>
<style>
  /* HEADER IMAGE */
  header.intro-header {background: #6f5499;background: no-repeat center center;background-attachment: scroll;-webkit-background-size: cover;-moz-background-size: cover;background-size: cover;-o-background-size: cover;}

	/* Preloader */#preloader {position:fixed;top:0;left:0;right:0;bottom:0;background-color:#fff; /* change if the mask should have another color then white */z-index:99; /* makes sure it stays on top */}
	#status {width:200px;height:200px;position:absolute;left:50%; /* centers the loading animation horizontally one the screen */top:50%; /* centers the loading animation vertically one the screen */background-image:; /* path to your loading animation */background-repeat:no-repeat;background-position:center;margin:-100px 0 0 -100px; /* is width and height divided by two */}
	li {list-style: none;}
            body.modal-open
            {overflow: hidden;padding-right: 0px;
        }
	article li {list-style: inherit;}
	article .figure {text-align: center}
    </style>
    <!-- end Loading front stylesheet here -->
    </head>

    <body>
	    
	<!-- 	
        <div id="preloader">
	    <div id="status">
	    </div>
	</div>  
	-->
	<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://ucsd-cse130.github.io/wi22/index.html" id="blog-title-left-top">cse130</a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="https://ucsd-cse130.github.io/wi22/calendar.html">Calendar</a></li>
                <li><a href="https://ucsd-cse130.github.io/wi22/contact.html">Contact</a></li>
                <li><a href="https://ucsd-cse130.github.io/wi22/grades.html">Grades</a></li>
                <li><a href="https://ucsd-cse130.github.io/wi22/lectures.html">Lectures</a></li>
                <li><a href="https://ucsd-cse130.github.io/wi22/assignments.html">Assignments</a></li>
                <li><a href="https://ucsd-cse130.github.io/wi22/links.html">Links</a></li>
                <li><a href="https://www.piazza.com/class/kxyzngg3rhg65n" id="roundbutton" target="_blank"><i class="fa fa-twitter"></i>Piazza</a></li>
                <li><a href="https://canvas.ucsd.edu/courses/32731" id="roundbutton" target="_blank"><i class="fa fa-twitter"></i>Canvas</a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<!-- Portfolio Modals -->
    <div class="portfolio-modal modal fade" id="portfolioModal1" tabindex="-1" role="dialog" aria-hidden="true" style="padding-right:0px; overflow: hidden;">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <h1 class="font-style-inline-small-h1">Ranjit Jhala</h1>
                            <hr class="star-primary">
                            <img src="https://ucsd-cse130.github.io/wi22/static/img/ico.png" class="img-responsive img-centered" alt title>
                            <p class="font-style-inline-small">
                                <a href="https://www.twitter.com/ranjitjhala" target="_blank">follow me</a>. <br>
                                <a href="https://www.github.com/ranjitjhala" target="_blank">    <i class="fa fa-github" id="spaceg-social-modal"></i> </a>
                                <a href="https://www.twitter.com/ranjitjhala" target="_blank"><i class="fa fa-twitter" id="spaceg-social-modal"></i> </a>
                                <a href="https://plus.google.com/u/0/104385825850161331469" target="_blank"> <i class="fa fa-google-plus" id="spaceg-social-modal"></i></a>
                            </p>
                            <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i> Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
<!-- Menu Modals Add New Sa.21.Feb.2015 03:22:25 -->
    <div class="portfolio-modal modal fade" id="portfolioModal2" tabindex="-1" role="dialog" aria-hidden="true" style="padding-right:0px; overflow: hidden;">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <h1 class="font-style-inline-small-h1">Ranjit Jhala</h1>
                            <hr class="star-primary">
                            <p class="font-style-inline-small">
                              <a href="https://www.twitter.com/ranjitjhala" target="_blank">follow</a>. <br>
                              <a href="https://www.github.com/ranjitjhala" target="_blank">    <i class="fa fa-github" id="spaceg-social-modal"></i> </a>
                              <li><a href="https://ucsd-cse130.github.io/wi22/calendar.html">Calendar</a></li>
                              <li><a href="https://ucsd-cse130.github.io/wi22/contact.html">Contact</a></li>
                              <li><a href="https://ucsd-cse130.github.io/wi22/grades.html">Grades</a></li>
                              <li><a href="https://ucsd-cse130.github.io/wi22/lectures.html">Lectures</a></li>
                              <li><a href="https://ucsd-cse130.github.io/wi22/assignments.html">Assignments</a></li>
                              <li><a href="https://ucsd-cse130.github.io/wi22/links.html">Links</a></li>
                              <li><a href="https://www.piazza.com/class/kxyzngg3rhg65n" id="roundbutton" target="_blank"><i class="fa fa-twitter"></i>Piazza</a></li>
                              <li><a href="https://canvas.ucsd.edu/courses/32731" id="roundbutton" target="_blank"><i class="fa fa-twitter"></i>Canvas</a></li>
                            </p>
                            <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i>Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


        <div id="content">
            <!-- Post Header -->
    <header class="intro-header" style="background-image: url('https://ucsd-cse130.github.io/wi22/static/img/sea.jpg')" alt title>

    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Final Exam Review</h1>
                    
                    <span class="meta">
		    
		    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->


<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
			<h2 id="tips-for-writing-programs-about-programming-languages">Tips for Writing Programs about Programming Languages</h2>
<h3 id="start-with-the-base-cases">Start with the base cases</h3>
<p>They are usually more straightforward and don’t require thinking about recursion.</p>
<h3 id="pay-attention-to-the-types-you-have-and-what-youre-trying-to-produce">Pay attention to the types you have and what you’re trying to produce</h3>
<p>My process for writing <code>eval env (EVar x)</code> looks something like:</p>
<ol type="1">
<li>What is the type of <code>eval</code>? It’s <code>Env -&gt; Expr -&gt; Value</code> where <code>Env = [(Id, Value)]</code></li>
<li>We’re working with <code>EVar x</code> so we also have <code>x</code> of type <code>Id</code>.</li>
<li>So at hand we have: an <code>Id</code>, an <code>Env</code> that is a <code>[(Id, Value)]</code>, and if we look at our helper functions we have a function <code>lookupId :: [(Id, Value)] -&gt; Id -&gt; Value</code>.</li>
<li>This looks like a good solution so let’s start there and we see that <code>lookupId env x</code> works and does what it should do.</li>
</ol>
<p>We can follow this for other base cases where it’s sometimes even more straightforward. For <code>eval env (EInt i)</code> we have <code>i</code> of type <code>Int</code>. We also have <code>VInt</code> which takes an <code>Int</code> and produces a <code>Value</code>. And indeed the implementation is <code>eval env (EInt i) = VInt i</code>.</p>
<h3 id="contextsenvironments">Contexts/Environments</h3>
<p><code>env</code> was very important to the previous example and these contexts/environments show up frequently in programming languages. Whenever we are dealing with a variable, we probably want to do it using the environment. We will see an example of this next when talking about <code>EApp</code>.</p>
<h3 id="recursion">Recursion</h3>
<p>For cases with sub <code>Expr</code>essions: these will probably be recursive. So anytime we see a case like <code>eval env (EApp e1 e2)</code> we’re probably going to want to call <code>eval ___ e1</code> and <code>eval ___ e2</code>. Keep these around as <code>eval</code> let’s us produce <code>Value</code>s which is our eventual goal.</p>
<p>My first step for thinking about these “complex” expressions is to think of a specific example (doing the base cases first will help here), say <code>(\x -&gt; x) 1</code> which we know should evaluate to <code>1</code>. This case would look like</p>
<pre><code>eval env (EApp (ELam &quot;x&quot; (EVar &quot;x&quot;)) (EInt 1)) </code></pre>
<p>However, we are just using this to help us figure out how to write <code>eval env (EApp e1 e2)</code> so keep <code>e1 = (ELam "x" (EVar "x"))</code> and <code>e2 = (EInt 1)</code> in mind but don’t focus too much on them.</p>
<p>At this point we have hopefully written the <code>eval</code> cases for <code>ELam</code> and <code>EInt</code>. So we know that <code>eval env e1</code> in this case will return <code>VClos env "x" (EVar "x")</code>. We also know that <code>eval env e2</code> will return <code>VInt 1</code>.</p>
<p>Now we see that we’re dealing with a variable particularly the <code>"x"</code> argument of the closure. A closure is a function values so it is waiting for an argument to substitute for <code>"x"</code>. What does substitution mean though? Here substitution means that, when we evaluate the body (<code>EVar x</code>), we want it to return <code>1</code>. When does <code>eval ___ (EVar x)</code> return <code>1</code>? Why when <code>___</code> has the binding <code>(x, VInt 1)</code>.</p>
<p>Now we have arrived at the partial implementation:</p>
<pre><code>eval env (EApp e1 e2) = eval (x, v2):___ body
  where
    VClos closEnv x body = eval env e1
    v2 = eval env e2</code></pre>
<p>Lastly we have to figure out what to put as the rest of the environment when evaluating <code>body</code>. Here it is time to once again take stock of what types of things we have, in particular, what things of type <code>Env</code> we have (it’s <code>env</code> and <code>closEnv</code>). Now it pays to think about the case of <code>eval env (ELam x body) = VClos env x body</code>. Remember that the <code>env</code> when evaluating <code>(ELam x body)</code> is the <code>closEnv</code> in the <code>EApp</code> case. Here it pays to try to think about why we have <code>closEnv</code>. It captures the environment when a function is defined so let’s think about where that might be the case:</p>
<pre><code>let x = 1 in
let f = \y -&gt; x in
let x = 2 in
f 1</code></pre>
<p>This should evaluate to <code>1</code>. Importantly for our implementation of <code>eval</code> for <code>EApp</code> it is the <code>closEnv</code> when defining the lambda that contains <code>(x, VInt 1)</code> whereas <code>env</code> at the application site contains <code>(x, VInt 2)</code>. So we arrive at</p>
<pre><code>eval env (EApp e1 e2) = eval (x, v2):closEnv body
  where
    VClos closEnv x body = eval env e1
    v2 = eval env e2</code></pre>
<h3 id="dont-be-more-specific-than-you-need-to-be">Don’t be more specific than you need to be</h3>
<p>While we used <code>EInt 1</code> as the argument in our example we never had to look inside of it, all we had to do was call <code>eval env e2</code>. You should try to do this whenever possible: if you don’t need to know specific information about a subterm besides what it evaluates to (or whatever other thing you are computing) then just do the recursive call on it.</p>
<p>For non-recursive <code>ELet</code> we don’t actually care what <code>e1</code> or <code>e2</code> in <code>let x = e1 in e2</code> are. All we need to do is evaluate <code>e1</code> to <code>v1</code>, see that we have a variable, add <code>(x, v1)</code> to the environment, and then evaluate <code>e2</code> in the new environment. In that description it never mattered what the actual expressions <code>e1</code> and <code>e2</code> are so we shouldn’t pay attention to that. Just treat them as abstract expressions.</p>
<p>This is in contrast to <code>e1</code> in the <code>EApp</code> case because there we need to know that the first thing evaluates to a function. But notice that we only care that it <em>evaluates</em> to a function, so we only need to look at <code>e1</code> after evaluating it. This is a good general rule for writing recursive functions for programming languages: poke the subterms with the function you’re defining (here call <code>eval env e1</code>), <em>then</em> look at what you get back.</p>
<h2 id="write-and-run-tests">WRITE AND RUN TESTS</h2>
<p>When writing a case have a test in mind and run your code on it. When we were writing the <code>eval</code> case for <code>EApp</code> above we had the test case <code>(\x -&gt; x) 1</code> in mind. After you write the code hop over to GHCI and run that test case and see if it does what you expect. Don’t wait until you’ve implemented every case and then test some large chunk of code because debugging that will be hard.</p>
<h2 id="good-luck.">Good luck.</h2>
                <hr>
            </div>
        </div>
    </div>
</article>

        </div>
        <div id="footer">
        </div>
      <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="https://ucsd-cse130.github.io/wi22/feed.xml" data-datatype="json" data-type="GET" data-target="#frame" class="reload" id="clickme">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="https://twitter.com/ranjitjhala" data-datatype="json" data-type="GET" data-target="#frame" class="reload" id="clickme" target="_blank">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://plus.google.com/u/0/104385825850161331469" data-datatype="json" data-type="GET" data-target="#frame" class="reload" id="clickme" target="_blank">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-google-plus fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://github.com/ranjitjhala" target="_blank">
                            <span class="fa-stack fa-lg">

                              <i class="fa fa-arrow-circle-o-down"></i>
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
		    
                </ul>
                <p class="copyright text-muted">
                
                  Generated by <a href="http://jaspervdj.be/hakyll">Hakyll</a>,
                  template by <a href="http://lucumr.pocoo.org">Armin Ronacher</a>,
                  suggest improvements <a href="https://github.com/ucsd-progsys/liquidhaskell-blog/">here</a>.
                </p>
            </div>
        </div>
    </div>
</footer>


<!-- jQuery -->
<script src="https://ucsd-cse130.github.io/wi22/static/js/jquery.min.js"></script>
<script src="https://ucsd-cse130.github.io/wi22/static/js/spaceg.stylesheets.min.js"></script>
<script src="https://ucsd-cse130.github.io/wi22/static/js/bootstrap.min.js"></script>
<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
<script src="https://ucsd-cse130.github.io/wi22/static/js/anim.js"></script>
<script src="https://ucsd-cse130.github.io/wi22/static/js/scripts.js"></script>

    </body>
</html>
